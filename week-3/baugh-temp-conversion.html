<!--
============================================
; Title: Assignment 3.2 - Temperature Conversion - baugh-temp-conversion.html
; Author: Professor Krasso & Ace Baugh
; Date: 06/07/2022
; Modified By: Ace Baugh
; Description: This simple exercise takes the user's input
;                       and converts the number to its Celsius 
;                       equivalent and displays it.
; Referenced Code: W3Schools: Trigger button enter
============================================
-->

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>WEB 231 â€“ Enterprise JavaScript I</title>

		<!-- Link to external CSS page-->
		<link rel="stylesheet" href="../global.css" />
		<link rel="stylesheet" href="baugh-temp-conversion.css" />
	</head>
	<body>
		<h1 class="app-header">Welcome to the Temperature Conversion App!</h1>

		<div class="container">
			<div class="card">
				<div class="card-title">
					<h1>Fahrenheit to Celsius Converter</h1>
				</div>
				<div class="card-body">
					<form class="form">
						<div class="form-row">
							<label for="txtFahrenheit">Fahrenheit value:</label>
							<input type="text" name="txtFahrenheit" id="txtFahrenheit" placeholder="80" required />
						</div>
						<div class="form-row">
							<input id="btnConvert" class="btn" type="button" value="Convert Temperature" />
						</div>
					</form>
				</div>
			</div>

			<div class="card">
				<div class="card-title">
					<h1>Conversion Results</h1>
				</div>
				<div class="card-body">
					<p class="results" id="txtResults">26.67</p>
				</div>
			</div>

			<!-- Return to home page -->
			<p>
				<a href="../index.html" class="return-home">Return</a>
			</p>
		</div>
		<!-- JAVASCRIPT SECTION-->
		<script>
			// Variable that holds the button
			const btnConvert = document.getElementById('btnConvert');

			// *** Code from W3Schools and modified to fit code ***

			// Get the input field
			var input = document.getElementById('txtFahrenheit');

			// Execute a function when the user presses a key on the keyboard
			input.addEventListener('keypress', function (event) {
				// If the user presses the "Enter" key on the keyboard
				if (event.key === 'Enter') {
					// Cancel the default action, if needed
					event.preventDefault();
					// Trigger the button element with a click
					document.getElementById('btnConvert').click(tempConvert);
				}
			});
			// *** End Used Code ***

			// Clear And Select Function
			function clearAndSelect() {
				// Clear input field
				document.getElementById('txtFahrenheit').value = '';

				// Reselects input field for ease of typing
				document.getElementById('txtFahrenheit').focus();
			}
			// Adding Event Listener to the button
			btnConvert.addEventListener('click', tempConvert);

			// function that displays an alert once the function is called
			function tempConvert() {
				// Stores user input into variable
				let fahrenheit = document.getElementById('txtFahrenheit').value;

				// Input Validation

				// If empty or a non-number an alert will display else it will convert the number
				if (fahrenheit === '' || !Number.isInteger(parseFloat(fahrenheit))) {
					// Calls clear and select function
					clearAndSelect();

					// Alert user to enter a number
					alert('Please enter a real number.');
				} else {
					// Converts input value to celsius rounded to 2 decimal points
					const convertedValue = ((parseFloat(fahrenheit) - 32) / 1.8).toFixed(2);

					// Places text into the paragraph element
					document.getElementById('txtResults').innerHTML = convertedValue;
					clearAndSelect();
				}
			}
		</script>
	</body>
</html>
